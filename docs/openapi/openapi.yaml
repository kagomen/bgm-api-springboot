openapi: 3.0.0
info:
  title: BGM API
  version: 1.0.0
  description: |
    - â˜…ã®ã¤ã„ãŸã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã¯å®Ÿè£…ã®å„ªå…ˆåº¦ä½
    - ğŸ”“ã®ã¤ã„ãŸã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã¯ãƒ­ã‚°ã‚¤ãƒ³ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ã¿ä½¿ç”¨å¯
      - ãã®ä»–ã®ãƒ­ãƒ¼ãƒ«æ¨©é™ãŒã‚ã‚‹ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã¯ã€ã€‘å†…ã«ãã®æ—¨ã‚’è¨˜è¿°

servers:
  - url: http://localhost:8080

components:
  securitySchemes:
    firebase:
      type: http
      scheme: bearer
      bearerFormat: JWT

paths:
  /get_bgm_list:
    get:
      summary: BGMä¸€è¦§ã‚’å–å¾—(ã‚¿ã‚°æ¤œç´¢)
      tags: [bgm]
      parameters:
        - name: tags
          in: query
          description: ã‚¿ã‚°æ¤œç´¢ç”¨ã‚¯ã‚¨ãƒª(å°æ–‡å­—ã®è‹±å­—ã®ã¿ã€è¤‡æ•°ã®å ´åˆã¯ã‚«ãƒ³ãƒã§åŒºåˆ‡ã‚‹)
          required: false
          schema:
            type: array
            items:
              type: string
            example: ["rain", "cafe"]
          style: form
          explode: false # tags=rain,cafe ã¨ã™ã‚‹ã®ã«å¿…è¦ãªè¨­å®š
      responses:
        "200":
          description: BGMä¸€è¦§ã‚’å–å¾—ã—ã¾ã—ãŸ
          content:
            application/json:
              schema:
                type: object
                properties:
                  isSuccess:
                    type: boolean
                  data:
                    type: array
                    items:
                      $ref: "./components/schemas/BgmResponse.yaml"
        "400":
          $ref: "./components/responses/BadRequestResponse.yaml"

  /get_bgm_list/{userId}:
    get:
      summary: æŒ‡å®šã—ãŸãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒæŠ•ç¨¿ã—ãŸBGMä¸€è¦§ã‚’å–å¾—
      tags: [bgm]
      parameters:
        - name: userId
          in: path
          required: true
          schema:
            type: integer
      responses:
        "200":
          description: BGMä¸€è¦§ã‚’å–å¾—ã—ã¾ã—ãŸ
          content:
            application/json:
              schema:
                type: object
                properties:
                  isSuccess:
                    type: boolean
                  data:
                    type: array
                    items:
                      $ref: "./components/schemas/BgmResponse.yaml"
        "400":
          $ref: "./components/responses/BadRequestResponse.yaml"
        "401":
          $ref: "./components/responses/UnauthorizedResponse.yaml"
        "403":
          $ref: "./components/responses/ForbiddenResponse.yaml"
        "404":
          $ref: "./components/responses/NotFoundResponse.yaml"

  /get_bgm/{bgmId}:
    get:
      summary: æŒ‡å®šã—ãŸBGMã®æƒ…å ±ã‚’å–å¾—
      tags: [bgm]
      parameters:
        - name: bgmId
          in: path
          required: true
          schema:
            type: integer
      responses:
        "200":
          description: BGMã®ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ã—ã¾ã—ãŸ
          content:
            application/json:
              schema:
                type: object
                properties:
                  isSuccess:
                    type: boolean
                  data:
                    $ref: "./components/schemas/BgmResponse.yaml"
        "400":
          $ref: "./components/responses/BadRequestResponse.yaml"
        "404":
          $ref: "./components/responses/NotFoundResponse.yaml"

  /post_bgm:
    post:
      summary: BGMã‚’æŠ•ç¨¿
      tags: [bgm]
      description: |
        æŠ•ç¨¿è€…ãƒ‡ãƒ¼ã‚¿(userId)ã¯JWTãƒˆãƒ¼ã‚¯ãƒ³ã‹ã‚‰ã‚µãƒ¼ãƒå´ã§åˆ¤åˆ¥ã™ã‚‹ãŸã‚ã€ãƒªã‚¯ã‚¨ã‚¹ãƒˆãƒœãƒ‡ã‚£ã«ã¯å«ã‚ãªã„
      security:
        - firebase: []
      x-roles:
        - USER
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "./components/schemas/BgmRequest.yaml"
      responses:
        "201":
          description: BGMã‚’æŠ•ç¨¿ã—ã¾ã—ãŸ
        "400":
          $ref: "./components/responses/BadRequestResponse.yaml"
        "401":
          $ref: "./components/responses/UnauthorizedResponse.yaml"
        "403":
          $ref: "./components/responses/ForbiddenResponse.yaml"

  /delete_bgm/{bgmId}:
    patch:
      summary: æŒ‡å®šã—ãŸBGMã‚’è«–ç†å‰Šé™¤ã€æŠ•ç¨¿ãƒ¦ãƒ¼ã‚¶ã¨ç®¡ç†è€…ã®ã¿ã€‘â˜…
      tags: [bgm]
      security:
        - firebase: []
      x-roles:
        - OWNER
        - ADMIN
      parameters:
        - name: bgmId
          required: true
          in: path
          schema:
            type: integer
      responses:
        "204":
          description: æŠ•ç¨¿ã‚’å‰Šé™¤ã—ã¾ã—ãŸ
        "400":
          $ref: "./components/responses/BadRequestResponse.yaml"
        "401":
          $ref: "./components/responses/UnauthorizedResponse.yaml"
        "403":
          $ref: "./components/responses/ForbiddenResponse.yaml"
        "404":
          $ref: "./components/responses/NotFoundResponse.yaml"

  /get_tag_list:
    get:
      summary: åˆ©ç”¨å¯èƒ½ãªã‚¿ã‚°ä¸€è¦§ã‚’å–å¾—
      tags: [tag]
      responses:
        "200":
          description: ã‚¿ã‚°ä¸€è¦§ã‚’å–å¾—ã—ã¾ã—ãŸ
          content:
            application/json:
              schema:
                type: object
                properties:
                  isSuccess:
                    type: boolean
                  data:
                    type: array
                    items:
                      $ref: "./components/schemas/TagResponse.yaml"
        "400":
          $ref: "./components/responses/BadRequestResponse.yaml"

  /add_tag/{bgmId}:
    post:
      summary: æŒ‡å®šã—ãŸBGMã«ã‚¿ã‚°ã‚’è¿½åŠ 
      tags: [tag]
      security:
        - firebase: []
      x-roles:
        - USER
      parameters:
        - name: bgmId
          in: path
          required: true
          schema:
            type: integer
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "./components/schemas/TagAddRequest.yaml"
      responses:
        "201":
          description: ã‚¿ã‚°ã‚’è¿½åŠ ã—ã¾ã—ãŸ
        "400":
          $ref: "./components/responses/BadRequestResponse.yaml"
        "401":
          $ref: "./components/responses/UnauthorizedResponse.yaml"
        "403":
          $ref: "./components/responses/ForbiddenResponse.yaml"
        "404":
          $ref: "./components/responses/NotFoundResponse.yaml"

  /remove_tag/{bgmId}/{tagId}:
    delete:
      summary: æŒ‡å®šã—ãŸBGMã‹ã‚‰æŒ‡å®šã—ãŸã‚¿ã‚°ã‚’ç‰©ç†å‰Šé™¤
      description: ã‚¿ã‚°ã¯è¤‡æ•°å€‹åŒæ™‚ã«å‰Šé™¤ã§ããªã„
      tags: [tag]
      security:
        - firebase: []
      x-roles:
        - USER
      parameters:
        - name: bgmId
          in: path
          required: true
          schema:
            type: integer
        - name: tagId
          in: path
          required: true
          schema:
            type: integer
      responses:
        "204":
          description: ã‚¿ã‚°ã‚’å‰Šé™¤ã—ã¾ã—ãŸ
        "400":
          $ref: "./components/responses/BadRequestResponse.yaml"
        "401":
          $ref: "./components/responses/UnauthorizedResponse.yaml"
        "403":
          $ref: "./components/responses/ForbiddenResponse.yaml"
        "404":
          $ref: "./components/responses/NotFoundResponse.yaml"

  /get_bookmark_list:
    get:
      summary: ãƒ–ãƒƒã‚¯ãƒãƒ¼ã‚¯ä¸€è¦§ã‚’å–å¾—(ã‚¿ã‚°æ¤œç´¢)
      tags: [bookmark]
      security:
        - firebase: []
      x-roles:
        - USER
      parameters:
        - name: tags
          in: query
          description: ã‚¿ã‚°æ¤œç´¢ç”¨ã‚¯ã‚¨ãƒª(å°æ–‡å­—ã®è‹±å­—ã®ã¿ã€è¤‡æ•°ã®å ´åˆã¯ã‚«ãƒ³ãƒã§åŒºåˆ‡ã‚‹)
          required: false
          schema:
            type: array
            items:
              type: string
            example: ["rain", "cafe"]
          style: form
          explode: false
      responses:
        "200":
          description: ãƒ–ãƒƒã‚¯ãƒãƒ¼ã‚¯ä¸€è¦§ã‚’å–å¾—ã—ã¾ã—ãŸ
          content:
            application/json:
              schema:
                type: object
                properties:
                  isSuccess:
                    type: boolean
                  data:
                    type: array
                    items:
                      $ref: "./components/schemas/BgmResponse.yaml"
        "400":
          $ref: "./components/responses/BadRequestResponse.yaml"
        "401":
          $ref: "./components/responses/UnauthorizedResponse.yaml"
        "403":
          $ref: "./components/responses/ForbiddenResponse.yaml"
        "404":
          $ref: "./components/responses/NotFoundResponse.yaml"

  /add_bookmark/{bgmId}:
    post:
      summary: ãƒ–ãƒƒã‚¯ãƒãƒ¼ã‚¯ã«ç™»éŒ²
      tags: [bookmark]
      security:
        - firebase: []
      x-roles:
        - USER
      parameters:
        - name: bgmId
          in: path
          required: true
          schema:
            type: integer
      responses:
        "201":
          description: ãƒ–ãƒƒã‚¯ãƒãƒ¼ã‚¯ã«è¿½åŠ ã—ã¾ã—ãŸ
        "400":
          $ref: "./components/responses/BadRequestResponse.yaml"
        "401":
          $ref: "./components/responses/UnauthorizedResponse.yaml"
        "403":
          $ref: "./components/responses/ForbiddenResponse.yaml"
        "404":
          $ref: "./components/responses/NotFoundResponse.yaml"

  /delete_bookmark/{bgmId}:
    delete:
      summary: ãƒ–ãƒƒã‚¯ãƒãƒ¼ã‚¯ã®ç‰©ç†å‰Šé™¤
      tags: [bookmark]
      security:
        - firebase: []
      x-roles:
        - USER
      parameters:
        - name: bgmId
          in: path
          required: true
          schema:
            type: integer
      responses:
        "204":
          description: ãƒ–ãƒƒã‚¯ãƒãƒ¼ã‚¯ã‚’å‰Šé™¤ã—ã¾ã—ãŸ
        "400":
          $ref: "./components/responses/BadRequestResponse.yaml"
        "401":
          $ref: "./components/responses/UnauthorizedResponse.yaml"
        "403":
          $ref: "./components/responses/ForbiddenResponse.yaml"
        "404":
          $ref: "./components/responses/NotFoundResponse.yaml"

  /post_report:
    post:
      summary: é•åBGMã‚’é€šå ±â˜…
      tags: [report]
      security:
        - firebase: []
      x-roles:
        - USER
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "./components/schemas/ReportRequest.yaml"
      responses:
        "201":
          description: é•åå ±å‘Šã‚’é€ä¿¡ã—ã¾ã—ãŸ
        "400":
          $ref: "./components/responses/BadRequestResponse.yaml"
        "401":
          $ref: "./components/responses/UnauthorizedResponse.yaml"
        "403":
          $ref: "./components/responses/ForbiddenResponse.yaml"
        "404":
          $ref: "./components/responses/NotFoundResponse.yaml"

  /get_report_list:
    get:
      summary: é•åå ±å‘Šä¸€è¦§ã‚’å–å¾—ã€ç®¡ç†è€…ã®ã¿ã€‘â˜…
      tags: [report]
      security:
        - firebase: []
      x-roles:
        - ADMIN
      responses:
        "200":
          description: å ±å‘Šä¸€è¦§ã‚’å–å¾—ã—ã¾ã—ãŸ
          content:
            application/json:
              schema:
                type: object
                properties:
                  isSuccess:
                    type: boolean
                  data:
                    type: array
                    items:
                      $ref: "./components/schemas/ReportResponse.yaml"
        "400":
          $ref: "./components/responses/BadRequestResponse.yaml"
        "401":
          $ref: "./components/responses/UnauthorizedResponse.yaml"
        "403":
          $ref: "./components/responses/ForbiddenResponse.yaml"

  /ban_user/{userId}:
    patch:
      summary: ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®è«–ç†å‰Šé™¤ã€ç®¡ç†è€…ã®ã¿ã€‘â˜…
      tags: [report]
      description: |
        ã‚¢ã‚«ã‚¦ãƒ³ãƒˆBANç”¨
      security:
        - firebase: []
      x-roles:
        - ADMIN
      parameters:
        - name: userId
          in: path
          required: true
          schema:
            type: integer
      responses:
        "200":
          description: ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚’BANã—ã¾ã—ãŸ
        "400":
          $ref: "./components/responses/BadRequestResponse.yaml"
        "401":
          $ref: "./components/responses/UnauthorizedResponse.yaml"
        "403":
          $ref: "./components/responses/ForbiddenResponse.yaml"
        "404":
          $ref: "./components/responses/NotFoundResponse.yaml"

  /update_report/{reportId}:
    patch:
      summary: é•åå ±å‘Šã¸ã®å¯¾å¿œå†…å®¹ã‚’è¨˜éŒ²ã™ã‚‹ã€ç®¡ç†è€…ã®ã¿ã€‘â˜…
      tags: [report]
      security:
        - firebase: []
      x-roles:
        - ADMIN
      parameters:
        - name: reportId
          in: path
          required: true
          schema:
            type: integer
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "./components/schemas/ReportHandlingRequest.yaml"
      responses:
        "201":
          description: å¯¾å¿œå†…å®¹ã‚’è¨˜éŒ²ã—ã¾ã—ãŸ
        "400":
          $ref: "./components/responses/BadRequestResponse.yaml"
        "401":
          $ref: "./components/responses/UnauthorizedResponse.yaml"
        "403":
          $ref: "./components/responses/ForbiddenResponse.yaml"
        "404":
          $ref: "./components/responses/NotFoundResponse.yaml"
